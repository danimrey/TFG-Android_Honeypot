<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Gestión de archivos</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<link href="/images/android-logo.png" type="image/x-icon" rel="shortcut icon" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="/" class="logo">
									<span class="symbol"><img src="images/android-logo.png" alt="" /></span><span class="title">Android Manager</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="/">Inicio</a></li>
							<li><a href="/llamadas">Registro de llamadas</a></li>
							<li><a href="/sms">SMS</a></li>
							<li><a href="/contactos">Contactos</a></li>
							<li><a href="/archivos">Gestor de archivos</a></li>
							<li><a href="/galeria">Galería</a></li>
							<li><a href="/aplicaciones">Aplicaciones</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>Gestión de archivos</h1>
							<h3>Puede gestionar los contenidos de la carpeta Android Manager</h3>
							<!-- Table -->
								<section>
									<div class="table-wrapper">
										<% if(typeof(logs) == 'undefined'){ %>
											<p>Disco virtual vacío</p>
										<% } else {%>
											<% if(logs.logs.length != 0){ %>
											<table>
												<thead>
													<tr>
														<th>Nombre</th>
														<th>Tipo</th>
														<th>Tamaño</th>
														<th>Fecha de creación</th>
														<th>Acciones</th>
													</tr>
												</thead>
												<tbody>
													<% for(var t in logs.logs){ %>
														<tr>
															<td><%= logs.logs[t].Archivo%></td>
															<td><%= logs.logs[t].Tipo%></td>
															<td>
															
															<% 
															function formatBytes(bytes,decimals) {
															   if(bytes == 0) return '0 Byte';
															   var k = 1000; // or 1024 for binary
															   var dm = decimals + 1 || 3;
															   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
															   var i = Math.floor(Math.log(bytes) / Math.log(k));
															   return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
															}
															var tamano = formatBytes(logs.logs[t].Size, 2)
															%>
															<%= tamano%>
															</td>
															<% var d = logs.logs[t].createdAt%>
															<% var formatted = d.toLocaleString() %>
															
															<td><%= formatted%></td>
															<td><a href='/download/<%-logs.logs[t]._id%>'>Descargar</a>&nbsp&nbsp&nbsp<a href='/delete/<%-logs.logs[t]._id%>/<%-logs.logs[t].Archivo%>'>Eliminar</a></td>
														</tr>
													<% } %>
												</tbody>
											</table>
											<% } else { %>
												<p>Disco virtual vacío</p>
											<% } %>
										<% } %>
									</div>
								</section>
								<section>
									<h3>Subir un archivo a la carpeta virtual</h3>
									<form method="post" action="/upload" enctype="multipart/form-data">
										<div class="row uniform">
											<div class="6u 12u$(xsmall)">
												<input type="file" name="archivo" id="file" value="" placeholder="File" />
											</div>
											<div class="12u$">
												<ul class="actions">
													<li><input type="submit" value="Subir archivo" class="special" /></li>
													<li><input type="reset" value="Reset" /></li>
												</ul>
											</div>
										</div>
									</form>
								</section>
						</div>	
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">
							<section>
								<h2>Contacto</h2>
								<ul class="icons">
									<li><a href="#" class="icon style2 fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="https://github.com/danimrey/TFG-Android_Honeypot" class="icon style2 fa-github"><span class="label">GitHub</span></a></li>
									<li><a href="mailto:daniel.moreno.rey@alumnos.upm.es" class="icon style2 fa-envelope-o"><span class="label">Email</span></a></li>
								</ul>
							</section>
							<ul class="copyright">
								<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>